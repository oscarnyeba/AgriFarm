{% extends "base.html" %}

{% block title %}Add Weather Data for {{ farm.farm_name }}{% endblock %}

{% block content %}
    <h1>Add Weather Data for {{ farm.farm_name }}</h1>

    <!-- Date Picker Form -->
    <form method="post">
        {% csrf_token %}
        {{ form.date }}  <!-- Date picker field -->
        <button type="submit">Fetch Weather Data</button>
    </form>

    <!-- Display weather info after it has been fetched -->
    {% if weather_info %}
    <h2>Weather Data for {{ farm.location }}</h2>
    <table>
        <tr>
            <th>Temperature (Â°C)</th>
            <th>Humidity (%)</th>
            <th>Rainfall (mm)</th>
        </tr>
        <tr>
            <td>{{ weather_info.temperature }}</td>
            <td>{{ weather_info.humidity }}</td>
            <td>{{ weather_info.rainfall }}</td>
        </tr>
    </table>
{% else %}
    <p>Click 'Submit' to store this data.</p>
{% endif %}


    <!-- jQuery Datepicker initialization -->
    <script>
        $(function() {
            $(".datepicker").datepicker({
                dateFormat: 'yy-mm-dd',
                maxDate: 0  // Prevent selecting future dates
            });
        });
    </script>    
{% endblock %}
