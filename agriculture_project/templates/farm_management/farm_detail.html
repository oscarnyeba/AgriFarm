{% extends "base.html" %}

{% block title %}{{ farm.farm_name }}{% endblock %}

{% block content %}
    <h1>{{ farm.farm_name }}</h1>
    <p>Location: {{ farm.location }}</p>
    <p>Total Area: {{ farm.total_area }} hectares</p>

    <!-- Weather Data Section -->
    <h2>Current Weather Data for {{ farm.location }}</h2>
    {% if weather_info %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th>
                <th>Temperature (°C)</th>
                <th>Humidity (%)</th>
                <th>Rainfall (mm)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ weather_info.date }}</td>  <!-- Ensure date is set -->
                <td>{{ weather_info.temperature }}</td>
                <td>{{ weather_info.humidity }}</td>
                <td>{{ weather_info.rainfall }}</td>
            </tr>
        </tbody>
    </table>
    {% else %}
    <p>No current weather data available.</p>
    {% endif %}
    <a href="{% url 'add_weather_data' farm.id %}" class="btn btn-success">Add Weather Data</a>
   
    <!-- Historical Weather Data Section -->
    <h2>Weather History</h2>
    {% if weather_data %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th>
                <th>Temperature (°C)</th>
                <th>Humidity (%)</th>
                <th>Rainfall (mm)</th>
            </tr>
        </thead>
        <tbody>
            {% for data in weather_data %}
            <tr>
                <td>{{ data.date }}</td>
                <td>{{ data.temperature }}</td>
                <td>{{ data.humidity }}</td>
                <td>{{ data.rainfall }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No historical weather data available.</p>
    {% endif %}
 
    <!-- Recommendations Section -->
    <h2>Recommended Crops Based on Current Weather</h2>
    {% if recommendations %}
    <ul>
    {% for crop in recommendations %}
        <li>{{ crop.crop_name }} - Suitable for current conditions</li>
    {% endfor %}
    </ul>
    {% else %}
    <p>No crops recommended based on current weather conditions. Please check back later or adjust the farm conditions.</p>
    {% endif %}

{% endblock %}
